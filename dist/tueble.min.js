/*!
* tueble v1.5.3
* (c) 2020 Marcos Freire
* @license MIT
*/
!function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return Object.assign.apply(Object,[{}].concat(i(t.map((function(t){return t in e?function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,e[t]):{}})))))}var s=function e(n){t(this,e);var r=o(n,["show","sortable","filterable","columnClass","label","index","highlight","columnHeaderClass"]);for(var i in r)this[i]=n[i];this.index&&(this.sortable=!1,this.filterable=!1,this.highlight=!1),this.isActive=!1,this.sortOrder=1,this.template=n.$scopedSlots.default},l=function(){function e(n,r){t(this,e),this.filterText=n,this.filterMinSize=r}return r(e,[{key:"isValid",value:function(){return"string"==typeof this.filterText&&this.filterText.length>=this.filterMinSize}}]),e}(),a=function(){function e(n){t(this,e);var r=o(n,["filterBy","filterColumn"]);for(var i in r)this[i]=n[i]}return r(e,[{key:"isValid",value:function(){return this.filterBy.constructor===Array&&this.filterBy.length>0&&"string"==typeof this.filterColumn}}]),e}();function u(e,t,n,r,i,o,s,l,a,u){"boolean"!=typeof s&&(a=l,l=s,s=!1);const c="function"==typeof n?n.options:n;let d;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),r&&(c._scopeId=r),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):t&&(d=s?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),d)if(c.functional){const e=c.render;c.render=function(t,n){return d.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,d):[d]}return n}const c=u({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",e._l(e.columns,(function(t){return n("BaseCell",{key:t.id,attrs:{column:t,"row-data":e.rowData,"row-index":e.rowIndex,"text-search":e.filterText}})})),1)},staticRenderFns:[]},void 0,{name:"BaseRow",components:{BaseCell:{name:"BaseCell",functional:!0,props:{column:{type:Object,required:!0},rowData:{type:Object,required:!0},rowIndex:{type:Number},textSearch:{type:String,required:!1}},render:function(e,t){var n=t.props,r={};if(n.column.columnClass&&(r.class=n.column.columnClass),!n.column.index&&n.column.template)return e("td",r,n.column.template(n.rowData));r.domProps={};var i,o,s=n.column.index?n.rowIndex+1:n.column.highlight?(i=n.rowData[n.column.show],(o=n.textSearch)?i?i.toString().replace(new RegExp(o,"gi"),(function(e){return'<span class="highlight">'+e+"</span>"})):"":i):n.rowData[n.column.show];return r.domProps.innerHTML=s,e("td",r)}}},props:{rowIndex:{required:!0,type:Number},columns:{required:!0,type:Array},rowData:{required:!0,type:Object},filterText:{required:!1,type:String,default:""}},computed:{showData:function(){return this}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const d=u({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("th",{class:e.classNames,on:{click:e.clickAction}},[e._v("\n  "+e._s(e.column.label)+"\n  "),e.column.isActive?n("span",{domProps:{innerHTML:e._s(e.sortIcon)}}):e._e()])},staticRenderFns:[]},void 0,{name:"BaseColumnHeader",props:{column:{required:!0,type:Object},columnIndex:{type:Number}},computed:{classNames:function(){return this.column.columnHeaderClass+(this.column.isActive?" header-active":"")+(this.column.index?" header-index":"")},sortIcon:function(){return 1==this.column.sortOrder?"&#9660;":"&#9650;"}},methods:{clickAction:function(){this.column.index||this.$emit("sortUpdate",this.columnIndex)}}},void 0,!1,void 0,!1,void 0,void 0,void 0);var f=new(function(){function e(){t(this,e)}return r(e,[{key:"filterArray",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=this.pluck(r.filter((function(e){return e.filterable})),"show");i.isValid()&&(e=e.filter((function(e){return Object.keys(e).filter((function(e){return s.includes(e)})).some((function(t){return String(e[t]).toLowerCase().indexOf(i.filterText.toLowerCase())>=0}))}))),o.filter((function(e){return e.isValid()})).forEach((function(t){e=e.filter((function(e){return t.filterBy.includes(e[t.filterColumn])}))})),t&&(e=e.slice().sort((function(e,r){return((e=e[t])===(r=r[t])?0:e>r?1:-1)*n})));var l=0;return e=e.map((function(e){return e._id=l++,e}))}},{key:"pluck",value:function(e,t){return e.reduce((function(e,n){return e.concat(n[t])}),[])}}]),e}());const h=u({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tueble-component"},[n("table",{class:e.tableClass},[e.showCaption?n("caption"):e._e(),e._v(" "),0==e.filteredAndSortedData.length?n("p",{staticClass:"no-results"},[e._v(e._s(e.noDataText))]):e._e(),e._v(" "),n("thead",[n("tr",e._l(e.columns,(function(t,r){return n("BaseColumnHeader",{key:t.id,attrs:{column:t,"column-index":r},on:{sortUpdate:e.updateSortColumn}})})),1)]),e._v(" "),n("tbody",{class:e.tableBodyClass},e._l(e.filteredAndSortedData,(function(t,r){return n("BaseRow",{key:t._id,attrs:{columns:e.columns,"row-index":r,"row-data":t,"filter-text":e.filterText}})})),1)]),e._v(" "),n("div",{staticStyle:{display:"none"}},[e._t("default")],2)])},staticRenderFns:[]},void 0,{name:"tu-table",components:{BaseRow:c,BaseColumnHeader:d},props:{data:{required:!0,type:Array},showCaption:{required:!1,type:Boolean,default:!0},tableClass:{required:!1,type:String},tableBodyClass:{required:!1,type:String},filterText:{required:!1,type:String,default:""},filterMinSize:{required:!1,type:Number,default:2},defaultSortBy:{required:!1,type:String},defaultSortOrder:{required:!1,default:"asc",validator:function(e){return["asc","desc"].includes(e)}},noDataText:{required:!1,type:String,default:"No results found."}},data:function(){return{columns:[],domainFilters:[],orderBy:null,orderAscDesc:1}},computed:{filteredAndSortedData:function(){var e=this.data,t=this.orderBy,n=this.orderAscDesc,r=new l(this.filterText,this.filterMinSize),i=this.domainFilters;return f.filterArray(e,t,n,this.columns,r,i)}},mounted:function(){this.columns=this.mapVueComponentsToObjects("TuebleColumn","Column"),this.domainFilters=this.mapVueComponentsToObjects("FilterByDomain","DomainFilter"),this.defaultSortBy&&(this.orderBy=this.defaultSortBy,this.setDefaultColumn(this.defaultSortBy)),this.$on("FilterByDomainChanged",(function(e){this.domainFilters=this.mapVueComponentsToObjects("FilterByDomain","DomainFilter")}))},methods:{updateSortColumn:function(e){for(var t=0;t<this.columns.length;t++)t==e?(this.columns[t].isActive&&(this.columns[t].sortOrder=-1*this.columns[t].sortOrder),this.columns[t].isActive=!0,this.orderBy=this.columns[t].show,this.orderAscDesc=this.columns[t].sortOrder):this.columns[t].isActive=!1},setDefaultColumn:function(e){var t=this;this.columns.forEach((function(n){n.show==e&&(n.isActive=!0,"asc"==t.defaultSortOrder&&(n.sortOrder=1),"desc"==t.defaultSortOrder&&(n.sortOrder=-1),t.orderAscDesc=n.sortOrder)}))},mapVueComponentsToObjects:function(e,t){var n={Column:s,DomainFilter:a};return this.$children.filter((function(t){return t.$options.name==e})).map((function(e){return new n[t](e)}))}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const m=u({render:function(){var e=this.$createElement;this._self._c;return this._e()},staticRenderFns:[]},void 0,{name:"TuebleColumn",props:{show:{type:String,required:!1},sortable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},index:{type:Boolean,default:!1,required:!1},highlight:{type:Boolean,default:!1,required:!1},label:{type:String,required:!0},columnClass:{type:String,default:""},columnHeaderClass:{type:String,default:""}}},void 0,!1,void 0,!1,void 0,void 0,void 0);const p=u({render:function(){var e=this.$createElement;this._self._c;return this._e()},staticRenderFns:[]},void 0,{name:"FilterByDomain",props:{filterBy:{required:!0,type:Array,default:""},filterColumn:{required:!0,type:String}},watch:{filterBy:function(){this.$parent.$emit("FilterByDomainChanged",this.filterBy)}}},void 0,!1,void 0,!1,void 0,void 0,void 0);var y=Object.freeze({__proto__:null,Tueble:h,TuebleColumn:m,FilterByDomain:p});function v(e,t){return t?e.toString().replace(new RegExp(t,"gi"),(function(e){return'<span class="highlight">'+e+"</span>"})):e}var b={install:function e(t){e.installed||(e.installed=!0,Object.keys(y).forEach((function(e){var n=y[e].name?y[e].name:e;t.component(n,y[e])})),t.filter("highlight",v))}},g=null;"undefined"!=typeof window?g=window.Vue:"undefined"!=typeof global&&(g=global.Vue),g&&g.use(b),e.FilterByDomain=p,e.HighlightText=v,e.Tueble=h,e.TuebleColumn=m,e.default=b}({});
